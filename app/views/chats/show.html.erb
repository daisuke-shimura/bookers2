<h3><%= @user.name %>さんとのチャット</h3>

<div class="container">
  <div class="row">
    <div class="col-4">
      <%= form_with model:@chat, url: chats_path, method: :post do |f| %>
        <%= f.text_area :message %>
        <%= f.hidden_field :room_id %>
        <%= f.submit "送信" %>
      <% end %>
    </div>
    <div class="col-8">
      <div class="d-flex justify-content-between">
        <p class="text-secondary"><%= @user.name %></p>
        <p class="text-success"><%= current_user.name %></p>
      </div>

      <% @chats.each do |chat| %>

        <% if chat.user_id == current_user.id %>
          <div class="d-flex justify-content-end">
            <span class="text-secondary small mr-1"><%= chat.created_at.hour %>：<%= chat.created_at.min %></span>
            <span class="badge badge-pill badge-success p-2 mr-1"><%= chat.message %></span>
            <%= link_to "削除", chat_path(chat.id), method: :delete, class:"btn btn-danger btn-sm" %>
          </div>
        <% else %>
          <div class="d-flex justify-content-start">
            <span class="text-secondary small mr-1"><%= chat.created_at.hour %>：<%= chat.created_at.min %></span>
            <span class="badge badge-pill badge-secondary p-2 mr-1"><%= chat.message %></span>
          </div>
        <% end %>

      <% end %>
    </div>
  </div>
</div>