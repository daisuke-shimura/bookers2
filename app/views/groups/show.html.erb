<div class="container">

  <div class="row">

    <div class="col-3">
      <%= render "books/userinfo", user: current_user %> 
    </div>


    <div class="col-8 offset-1">
      <h2>Groups Detail</h2>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>グループ名</th>
            <th>紹介文</th>
            <th>メンバー</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <%= image_tag @group.get_group_image.variant(resize_to_limit: [100, 100]).processed %>
            </td>
            <td>
              <%= link_to group_path(@group.id) do %>
                <%= @group.name %>
              <% end %>
            </td>
            <td><%= @group.introduction %></td>
            <td>
              <% @group_user.each do |group_user| %>
                <%= group_user.name %><br>
              <% end %>
            </td>
            <td>
              <% if @group.owner_id == current_user.id %>
                <%= link_to "Edit", edit_group_path(@group.id), class: "btn btn-success" %>
              <% else %>
                <% if @group.group_users.exists?(user_id: current_user.id) %>
                  <%= link_to "Leave this group", group_group_users_path(@group.id), method: :delete, class: "btn btn-danger" %>
                <% else %>
                  <%= link_to "Join this group", group_group_users_path(@group.id), method: :post, class: "btn btn-success" %>
                <% end %>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>
    
    </div>
  
  </div>

</div>
